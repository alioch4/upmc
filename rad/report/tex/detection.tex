\section{Detection d'un honeypot}

Les concepteurs de botnet ont plusieurs moyens afin de détecter si
une unité d'un botnet est un honeypot ou bien un zombie digne de confiance.
Dans cette partie nous allons exposer les différentes stratégies que peut employer
un botnet afin de faire le tri entre les unités dignes de confiance et les honeypots.

\subsection{Detection par défis d'envoi de contenu malveillant}

En raison de la dimension légale et juridique liée au spam et à l'envoi de fichiers malveillants,
il est clair que les administrateurs systèmes ne peuvent pas contribuer de manière trop zelée au
activités malveillantes du botnet. On tombe ici sur un grave problème, les botnets en testant le
zele de certains noeuds auront toujours la possibilité de détecter plus ou moins finement les intrus.

De ce fait une stratégie possible pour détecter un honeypot serait de lui envoyer des requêtes comme
"Envoi 5000 mails contenant des pièces jointes malveillantes aux adresses suivantes". Si la 
station refuse, cela signifie très probablement
qu'elle est inefficace momentanement ou bien que c'est un honeypot.

Cette stratégie est assez difficile à contrer car l'administrateur du botnet peut parfaitement mettre dans la
liste des cibles des sondes (\textit{probes} dans le texte) afin de détecter si la station est de bonne foi
ou non.

Il existe différentes façons d'utiliser cette stratégie.
La première consisterait à utiliser cette stratégie avant de faire rentrer une station dans le botnet.
Il est facile pour un concepteur de botnet de ne donner accès au reste du botnet que si une station
a prouvé son efficacité. Cette méthode a pour avantage de bloquer les honeypots avant qu'ils ne rentrent
dans le botnet.
Une seconde stratégie pourrait consister à remettre la confiance que le botnet a dans une station en doute
de manière périodique. Aléatoirement on pourrait placer dans la liste des cibles d'une station une sonde
de confiance controllées par le botnet. Cette stratégie a pour avantage de bloquer les tentatives de prise
de contrôle d'un noeud auxquels le botnet aurait accordé sa confiance.
Ces deux possibilités de verification sont cumulables.

\subsection{Detection par requête web}

Une autre façon de detecter si une station est compromise ou non consiste à lui demander de faire
des requêtes http sur une liste de site donnée. Cette procédure est plus difficile à gérer pour un administrateur
securité. Car il est difficile de savoir si une requête web est legitime ou bien si elle fait partie d'une tentative
de deni de service distribué. Cette difficulté de faire la différence entre deux requêtes rends
la tache de detection des botnet plus difficile.


\subsection{Difficultés de lutter contre ça}

Il est difficile de savoir si une adresse est un capteur ou non, c'est la raison principale pour laquelle
les honeypots peuvent se faire reperer.
En outre, lorsque une station (honeypots ou non) reçoit une liste de choses à faire, les cibles peuvent
être dissimulés à l'intérieur d'un fichier binaire difficile à analyser afin d'avoir la liste des cibles sans
leur envoyer du contenu. En outre, il est également possible pour un botnet de chiffrer ses communications entre
station aussi bien que les listes de cibles afin de rendre la retro-ingenierie plus délicate.

\subsection{Controle d'un noeud decideur}

La plupart des administrateurs securité hésitent à prendre le controle quand ils en ont l'occasion d'un
noeud décideur dans un botnet. Cela pour des raisons juridiques essentiellement. Il est clair que du trafic
partant d'une station est au yeux de la loi la responsable. Ainsi, si une station donneuse d'ordres venait à tomber
sous la responsabilité légale d'un administrateur securité, il pourrait être poursuivi pour les dégats causés.
Ainsi les administrateurs préfèrent souvent éviter de prendre des risques et ne veulent pas prendre le controle d'un
noeud donneur d'ordre. Bien que son utilisation pourrait donner de precieuses informations sur le fonctionnement du botnet
(Autres stations connectées, liste des taches en cours, cibles futures, \ldots) le risque légal est beaucoup trop
grand.
